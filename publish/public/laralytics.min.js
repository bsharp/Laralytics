"use strict";var laralytics=function(){var t={API:"/laralytics",Limit:0},e={info:[],click:[],custom:[]},n={},i=function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(e))return a.substring(e.length,a.length)}return""},a=function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t},r=function(t){var n=e.click.length+e.custom.length;0!==t.Limit&&(n===t.Limit||n>=t.Limit)&&(c(t),e={click:[],custom:[]})},l=function(t){e.custom.push({type:t.type,x:t.clientX,y:t.clientY,datetime:Math.floor((new Date).getTime()/1e3),element:t.target.id||t.target.className||t.target.localName,laralyticsElem:t.target.getAttribute("data-laralyticsElem")||""}),r(n)},c=function(t){var n=new XMLHttpRequest;n.open("POST",""+t.API,!0),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.setRequestHeader("X-XSRF-TOKEN",decodeURIComponent(i("XSRF-TOKEN"))),n.send(JSON.stringify(e))},o=function(i){n=a({},t,i),e.info={browser:window.navigator.userAgent,browserWidth:window.innerWidth,browserHeight:window.innerHeight,deviceWidth:window.screen.width,deviceHeight:window.screen.height,referral:document.referrer||null};for(var o=document.querySelectorAll("[data-laralytics]"),s=0;s<o.length;s++)o[s].addEventListener(""+o[s].getAttribute("data-laralytics"),l.bind(n));document.addEventListener("click",function(t){e.click.push({type:t.type,x:t.clientX,y:t.clientY,datetime:Math.floor((new Date).getTime()/1e3),element:t.target.id||t.target.className||t.target.localName,laralyticsElem:t.target.getAttribute("data-laralyticsElem")||""}),r(n)}),document.addEventListener("submit",function(t){e.click.push({type:t.type,x:t.clientX,y:t.clientY,datetime:Math.floor((new Date).getTime()/1e3),element:t.target.id||t.target.className||t.target.localName,laralyticsElem:t.target.getAttribute("data-laralyticsElem")||""}),r(n)}),window.onbeforeunload=function(){c(n)}};return{init:o}}();